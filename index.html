<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>maria isolina cozzani — portfolio</title>
  <meta name="description" content="violinist, composer-performer, multimedia artist. works, bio, contact." />
  
  <!-- SEO & Social Meta -->
  <meta property="og:title" content="Maria Isolina Cozzani - Violinist, Composer-Performer, Multimedia Artist">
  <meta property="og:description" content="Portfolio of Maria Isolina Cozzani - works, bio, contact information">
  <meta property="og:type" content="website">
  <meta property="og:image" content="assets/og-image.jpg">
  <meta name="twitter:card" content="summary_large_image">

  <!-- Force light theme on all devices -->
  <meta name="color-scheme" content="light">
  <meta name="theme-color" content="#ffffff">

  <!-- Preload critical resources -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@600;700&family=Source+Sans+3:wght@400;600&display=swap" rel="stylesheet">

  <style>
    :root {
      --txt: #0a0a0d;
      --bg: #fff;
      --muted: #5a5f66;
      --accent: #7ed321;
      --border: #e6e7ea;
      --max: 1440px;
      --radius: 0px;
      --brand-pink: #ff4fd8;
      --font-base: 'Source Sans 3', ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
      --font-heading: 'Space Grotesk', ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    }

    /* Dark mode support (kept light palette) */
    @media (prefers-color-scheme: dark) {
      :root {
        --txt: #0a0a0d;
        --bg: #ffffff;
        --muted: #5a5f66;
        --border: #e6e7ea;
      }
    }

    html {
      box-sizing: border-box;
      scroll-behavior: smooth;
      color-scheme: light;
      background: #fff; /* ensure white during overscroll on mobile */
    }

    *, *::before, *::after {
      box-sizing: inherit;
    }

    body {
      margin: 0;
      color: var(--txt);
      background: var(--bg);
      font: 16px/1.7 var(--font-base);
      text-rendering: optimizeLegibility;
      font-kerning: normal;
      font-variant-ligatures: common-ligatures;
      transition: background-color 0.3s ease, color 0.3s ease;
      position: relative;
      overflow-x: hidden;
    }

    /* Also force white on body as a safeguard */
    html, body { background: #fff; }

    /* Violin background animation */
    .violin-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -1;
      overflow: hidden;
    }

    .floating-violin {
      position: absolute;
      font-size: 24px;
      opacity: 0.1;
      animation: floatViolin linear infinite;
      filter: grayscale(1);
    }

    @keyframes floatViolin {
      0% {
        transform: translate(0, 0) rotate(0deg);
      }
      25% {
        transform: translate(100px, 50px) rotate(90deg);
      }
      50% {
        transform: translate(200px, -30px) rotate(180deg);
      }
      75% {
        transform: translate(100px, 80px) rotate(270deg);
      }
      100% {
        transform: translate(0, 0) rotate(360deg);
      }
    }

    a {
      color: var(--accent);
      text-decoration: none;
      transition: all 0.2s ease;
    }

    a:focus-visible, 
    button:focus-visible {
      outline: 2px solid var(--brand-pink);
      outline-offset: 3px;
      border-radius: 2px;
    }

    .wrap {
      max-width: var(--max);
      margin: 0 auto;
      padding: 28px 18px;
      position: relative;
      z-index: 1;
      background: var(--bg);
    }

    header {
      margin: 8px 0 18px;
    }

    h1 {
      font-family: var(--font-heading);
      font-size: 28px;
      font-weight: 700;
      letter-spacing: .02em;
      margin: 0 0 6px;
      color: var(--accent);
      transition: all 0.2s ease;
    }

    nav {
      margin: 14px 0 26px;
      font-family: var(--font-heading);
      letter-spacing: .01em;
      font-weight: 600;
    }

    nav a {
      margin: 0 10px 0 0;
      white-space: nowrap;
      color: var(--brand-pink);
      position: relative;
      padding: 4px 0;
    }

    nav a::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 0;
      height: 2px;
      background: var(--brand-pink);
      transition: width 0.3s ease;
    }

    nav a:hover::after,
    nav a:focus-visible::after {
      width: 100%;
    }

    nav a:hover {
      text-shadow: 0 0 8px rgba(255,79,216,.55), 0 0 18px rgba(255,79,216,.75);
    }

    main section {
      margin: 38px 0;
    }

    h2 {
      font-family: var(--font-heading);
      font-size: 18px;
      margin: 0 0 12px;
      color: var(--accent);
    }

    h3 {
      font-family: var(--font-heading);
      font-size: 16px;
      margin: 0 0 8px;
      transition: all 0.2s ease;
    }

    .card h3:hover, h1:hover {
      text-shadow: 0 0 8px rgba(255,79,216,.35), 0 0 18px rgba(255,79,216,.45);
    }

    .muted {
      color: var(--muted);
      opacity: 0.9;
    }

    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0,0,0,0);
      white-space: nowrap;
      border: 0;
    }

    /* Cards */
    .card {
      padding: 16px;
      border-radius: 0;
      background: var(--bg);
      border: 1px solid var(--border);
      transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
      position: relative;
      z-index: 1;
    }

    .card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      border-color: var(--brand-pink);
    }

    /* Gallery - Icone più grandi, 6 per riga */
    .thumbs {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 20px;
    }

    .thumb {
      position: relative;
      display: block;
      border-radius: 0;
      overflow: hidden;
      background: var(--bg);
      border: 1px solid var(--border);
      transition: transform .18s ease, border-color .18s ease, box-shadow .18s ease, filter .18s ease;
    }

    .thumb .poster {
      aspect-ratio: 16/9;
      width: 100%;
      object-fit: cover;
      display: block;
      filter: grayscale(.08) contrast(1.04);
      transition: filter .18s ease;
      will-change: filter, transform;
    }

    .thumb:hover {
      transform: translateY(-2px) scale(1.005);
      border-color: var(--brand-pink);
      box-shadow: 0 10px 26px rgba(255,79,216,.25), 0 0 0 2px rgba(255,79,216,.20), 0 0 28px rgba(255,79,216,.35);
    }

    .thumb:hover .poster {
      filter: grayscale(0) contrast(1.08) saturate(1.12);
    }

    .thumb:focus-visible {
      outline: 2px solid var(--brand-pink);
      outline-offset: 2px;
    }

    /* Detail View */
    body.is-detail main > section:not(#work-detail) {
      display: none;
    }

    #work-detail {
      margin-top: 10px;
    }

    #work-detail .back {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      margin: 6px 0 16px;
      font-size: 13px;
      color: var(--muted);
      padding: 6px 12px;
      border: 1px solid var(--border);
      border-radius: 2px;
      transition: all 0.2s ease;
    }

    #work-detail .back:hover {
      color: var(--txt);
      border-color: var(--brand-pink);
      background: rgba(255,79,216,0.05);
    }

    .embed {
      position: relative;
      padding-top: 56.25%;
      border-radius: var(--radius);
      overflow: hidden;
      border: 1px solid var(--border);
      background: rgba(0,0,0,0.03);
      margin-bottom: 14px;
    }

    .embed iframe {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      border: 0;
    }

    /* SoundCloud embed */
    .soundcloud-embed {
      margin-bottom: 14px;
    }

    /* Detail media grid */
    .detail-media-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
      margin-bottom: 14px;
    }

    @media (min-width: 900px) {
      .detail-media-grid {
        grid-template-columns: 1fr 1fr;
      }
    }

    .detail-media-grid img {
      width: 100%;
      aspect-ratio: 16/9;
      object-fit: cover;
      border-radius: 0;
      border: 1px solid var(--border);
    }

    /* Media grids */
    .video-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
      margin: 12px 0;
    }

    @media (min-width: 820px) {
      .video-grid {
        grid-template-columns: 1fr 1fr;
      }
    }

    .photo-grid, .media-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin: 10px 0;
    }

    @media (min-width: 720px) {
      .photo-grid, .media-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    .photo-grid img, .media-grid img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 0;
      border: 1px solid var(--border);
    }

    .media-grid .span-3 {
      grid-column: 1/-1;
    }

    /* Bio */
    #bio {
      --aside: 260px;
    }

    #bio .bio-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 18px;
      align-items: start;
    }

    #bio .bio-aside h2 {
      margin: 0 0 8px;
    }

    #bio .bio-aside .small {
      font-size: 12px;
    }

    #bio .bio-content {
      text-wrap: pretty;
    }

    #bio .bio-content p {
      margin: 0 0 12px;
      text-align: justify;
      hyphens: auto;
      orphans: 2;
      widows: 2;
      font-size: 15px;
      line-height: 1.75;
    }

    @media (min-width: 980px) {
      #bio .bio-grid {
        grid-template-columns: var(--aside) 1fr;
        gap: 28px;
      }
      #bio .bio-aside {
        position: sticky;
        top: 18px;
        align-self: start;
      }
      #bio .bio-content {
        column-count: 2;
        column-gap: 28px;
        column-fill: balance;
      }
      #bio .bio-content p {
        break-inside: avoid;
      }
    }

    /* Contact */
    .contact-line {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      font-weight: 600;
      color: var(--txt);
    }

    .icon-mail {
      width: 18px;
      height: 18px;
      fill: var(--accent);
    }

    footer {
      margin: 44px 0 12px;
      font-size: 13px;
      color: var(--muted);
    }

    /* Performance optimizations */
    #works-data, #bio, #contact {
      content-visibility: auto;
      contain-intrinsic-size: 1px 1000px;
    }

    /* Mobile improvements */
    @media (max-width: 480px) {
      .wrap {
        padding: 20px 12px;
      }
      
      h1 {
        font-size: 24px;
      }
      
      nav a {
        margin: 0 8px 0 0;
        font-size: 14px;
      }
      
      .thumbs {
        grid-template-columns: 1fr;
        gap: 12px;
      }
      
      .card {
        padding: 12px;
      }

      .floating-violin {
        font-size: 16px;
      }
    }
  </style>
</head>
<body>
  <!-- Violin background animation -->
  <div class="violin-bg" id="violinBackground"></div>

  <div class="wrap">
    <header>
      <h1>maria isolina cozzani</h1>
      <nav aria-label="primary">
        <a href="#works">works</a>
        <a href="#bio">bio</a>
        <a href="#contact">contact</a>
      </nav>
    </header>

    <main id="content" tabindex="-1">
      <section id="works" aria-label="works">
        <h2 class="sr-only">works</h2>
        <div class="gallery grid thumbs" id="thumbs"></div>
      </section>

      <section id="work-detail" class="work-detail" hidden></section>

      <section id="bio" hidden>
        <div class="bio-grid">
          <aside class="bio-aside">
            <h2>bio</h2>
            <p class="muted small">Extended CV and photos available on request.</p>
          </aside>
          <div class="bio-content">
            <p><strong>Maria Isolina Cozzani</strong> (b. 1994, Ludwigsburg) is an Italian-German violinist, composer-performer and multimedia artist based in Cologne. Working at the edges of free improvisation, electroacoustic performance and installation, she focuses on timbral extremes of the violin, spectral/granular resynthesis and spatial sound (4–8-channel and site-responsive setups). Her practice often integrates audio-reactive objects and upcycled technologies, assembling fragile yet vibrant ecosystems where sound, bodies and space co-shape one another.</p>
            <p>She trained in classical and jazz violin at the conservatories of La Spezia and Genoa and completed an MMus at ArtEZ University of the Arts (Arnhem, 2023) with research in free improvisation that culminated in <em>ISLN — Geography of sounds, shapeshifting multiplicities</em>. Recent and ongoing projects include the free-improv quintet <em>Inopia</em> (album <em>Exoplanet</em>, 2025); the electroacoustic duo <em>O.P.M.L. — Our Past Microtonal Love</em>; and the ensembles <em>Trio Lavish</em> (winners of the <em>Erasmus Jazz Prijs 2023</em>) and <em>Edera Trees</em>.</p>
            <p>Her music draws on microtonality (simple frequency relations beyond tempered systems), memory as layering/return, and a choreographic attention to gesture, instrument and space. She has appeared at Palazzo Ducale (Genoa), Museo Bagatti Valsecchi (Milan), MA/IN Matera Intermedia Festival (Matera), De Thomas (Amsterdam) and The Grey Space (The Hague).</p>
            <p>Alongside artistic work, Maria is active as an educator and as a project manager. In 2025 she coordinated the interdisciplinary project week <em>Connecting the Dots</em> at ArtEZ University of the Arts, leading planning and delivery for ~40 Master students across departments, guest-lecturer scheduling, rooming and documentation.</p>
          </div>
        </div>
      </section>

      <section id="contact" hidden>
        <h2>contact</h2>
        <p class="contact-line">
          <svg class="icon-mail" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path d="M3 6.75A1.75 1.75 0 0 1 4.75 5h14.5A1.75 1.75 0 0 1 21 6.75v10.5A1.75 1.75 0 0 1 19.25 19H4.75A1.75 1.75 0 0 1 3 17.25V6.75Zm1.9.2 7.08 5.31c.13.1.31.1.44 0l7.08-5.31a.25.25 0 0 0-.15-.45H5.05a.25.25 0 0 0-.15.45Zm14.15 1.69-6.43 4.82a2.25 2.25 0 0 1-2.84 0L3.35 8.64v8.61c0 .14.11.25.25.25h16.8c.14 0 .25-.11.25-.25V8.64Z"></path>
          </svg>
          <span>mariacozzani@gmail.com</span>
        </p>
      </section>

      <section id="works-data" hidden>
        <!-- PROBE THE ORACLE - AGGIUNTO IN PRIMA POSIZIONE -->
        <article class="card" id="probe-the-oracle" data-title="Probe the Oracle"
                 data-poster="assets/probe-the-oracle-cover.jpg">
          <h3><em>Probe the Oracle</em> (2025)</h3>
          <p><strong>Violin, live electronics, generative visuals</strong> - Maria Isolina Cozzani</p>
          
          <p>"Probe the Oracle" is an interactive performance exploring the boundaries between human intuition and algorithmic prediction. The piece uses machine learning models trained on the performer's improvisational vocabulary to generate real-time responses, creating a dialogue between the violinist's spontaneous expressions and the AI's probabilistic forecasts.</p>
          
          <p>The work investigates questions of agency, authorship, and the nature of creative intuition in human-machine collaboration. As the violinist probes the "oracle" (the AI system), the boundaries between leader and follower, question and answer, become increasingly blurred.</p>
          
          <p><strong>Technical note:</strong> Custom Max/MSP patch with Wekinator for real-time gesture recognition and response generation. Visuals created with TouchDesigner responding to both audio analysis and model confidence metrics.</p>
          
          <div class="media-grid">
            <img src="assets/probe-the-oracle-1.jpg" alt="Probe the Oracle performance setup" loading="lazy" decoding="async" width="800" height="450">
            <img src="assets/probe-the-oracle-2.jpg" alt="Detail of violin and electronics" loading="lazy" decoding="async" width="800" height="450">
            <img src="assets/probe-the-oracle-3.jpg" alt="Performance view with generative visuals" loading="lazy" decoding="async" width="800" height="450">
          </div>
        </article>

        <!-- Le altre opere seguono in ordine -->
        <article class="card" id="violin-algorithm-duet" data-title="Violin and Algorithm Duet"
                 data-yt="dUpo4ffqWa8"
                 data-poster="https://img.youtube.com/vi/dUpo4ffqWa8/hqdefault.jpg">
          <h3><em>Violin and Algorithm Duet</em> (2025)</h3>
          <p><strong>Violin</strong> - Maria Isolina Cozzani<br>
          <strong>Machine listening, concatenative synthesis algorithm</strong> - Matteo Traverso<br>
          <strong>Concept</strong> - Maria Isolina Cozzani, Matteo Traverso</p>
          
          <p>This piece is an improvised duo between violin and algorithm. During the first two minutes the violin improvises alone, providing the sound material. The algorithm's playback is determined by the violin's musical decisions. In the duet section, the two players influence each other—texturally and structurally.</p>
          
          <p><strong>Video:</strong> <a href="https://youtu.be/dUpo4ffqWa8" target="_blank" rel="noopener">YouTube</a></p>
        </article>

        <article class="card" id="what-is-left" data-title="what is left, what there grows"
                 data-poster="assets/what-is-left-cover.jpg"
                 data-drive="1PxZBF0uUqdAcqpShlq9IUOrqWa6HcPv5">
          <h3><em>what is left, what there grows</em> (2025)</h3>
          <p class="muted">Finalist at MA/IN Matera Intermedia Festival 2025.</p>
          <p>"what is left, what there grows" is a self-reactive environment composed of sound, immersive multi-channel audio (4–8 channels), upcycled trash speakers, small robots, and obsolete or broken technological remains—motherboards, wires, machine parts. Although over 90% of the installation is built from discarded or recycled materials, the experience it offers is one of vitality, regeneration, and ongoing transformation—whether driven by internal desire or external intervention.</p>
          <p>The installation evokes a kind of natural ritual in which the Anthropocene compresses geological eras, accelerating fossil formation through human waste. Decades of technological residue converge, reshaping sound, air, shadow, and perception, exposing a fractured sense of detachment from our consumer responsibilities.</p>
          <p>This is a fragile, eroded, yet vibrant environment in constant flux. All elements—robots, sound structures, speakers—listen and respond to one another; the system is entirely audio-reactive, including its interaction with the audience. The presence of living, reactive technology gives the impression of stepping into a sacred terrain, made of a new kind of nature—where even stepping over a cable or past a tiny machine feels intrusive.</p>
          <p>The installation sustains a delicate balance. It no longer needs the human, and barely welcomes them—except as careful listener, as silent observer.</p>
          <p><strong>Media:</strong> <a href="https://drive.google.com/file/d/1PxZBF0uUqdAcqpShlq9IUOrqWa6HcPv5/preview" target="_blank" rel="noopener">Video (Drive)</a></p>
        </article>

        <article class="card" id="exoplanet" data-title="Exoplanet — Inopia"
                 data-poster="assets/SM4830_cover%204000x4000px.jpg">
          <h3><em>Exoplanet</em> — Inopia (2025)</h3>
          <p><strong>EXOPLANET</strong> is a sonic exploration of human existence in an age of global crises. The collective Inopia poses questions of empathy, responsibility, and the relationship between humanity and the environment—expanding the understanding of jazz as a social, emotional, and reflective art form.</p>
          <p>The album unites composition and improvisation into an organic whole, merging elements of ambient, drone, electroacoustic music, and free improvisation. Sound becomes a medium of thought and emotion, a mirror of a world in transformation. Sounds interweave, lose their distinct origins, and create multilayered spaces of resonance filled with emotional and cultural depth.</p>
          <p><strong>Listen / info:</strong>
            <a href="https://listen.music-hub.com/bcFtvP" target="_blank" rel="noopener">Music-Hub</a> ·
            <a href="https://pascalburbach.bandcamp.com/album/exoplanet" target="_blank" rel="noopener">Bandcamp</a> ·
            <a href="https://www.instagram.com/inopiasound/" target="_blank" rel="noopener">@inopiasound</a>
          </p>
          <div class="media-grid">
            <img class="span-3" src="assets/SM4830_cover%204000x4000px.jpg" alt="Exoplanet cover" loading="lazy" decoding="async" width="1600" height="900">
            <img src="assets/DSC_4362.jpg" alt="Inopia live 1" loading="lazy" decoding="async" width="800" height="533">
            <img src="assets/DSC_4403.jpg" alt="Inopia live 2" loading="lazy" decoding="async" width="800" height="533">
            <img src="assets/DSC_4930.jpg" alt="Inopia live 3" loading="lazy" decoding="async" width="800" height="533">
            <img src="assets/unbenannt-8811.jpg" alt="Inopia portrait blurred" loading="lazy" decoding="async" width="800" height="533">
          </div>
        </article>

        <!-- Le altre opere continuano nello stesso ordine... -->
        <article class="card" id="lavish-trio"
                 data-title="Lavish Trio — Dump and Die"
                 data-poster="assets/lavish-cover-1200.jpg">
          <h3><em>Dump and Die</em> — Lavish Trio</h3>
          <p><strong>Lavish</strong> ist ein improvisierendes Trio, bestehend aus den komponierenden Musikern <em>Sol Jang</em> (Klavier), <em>Maria Isolina Cozzani</em> (Violine) und <em>Kim Kamilla Jäger</em> (Cello). Dieses Projekt entstand aus dem Drang heraus, musikalische Strukturen zu schaffen, die sich um ein zentrales Thema drehen. Klangbasierte Improvisation, Jazz und sich wiederholende Muster werden in einer kammermusikalischen Umgebung miteinander verwoben, die klein und zerbrechlich, aber auch brutal und brüllend klingen kann. Komponieren und Improvisieren sind gleichermaßen Teil ihres Materials, und die Stücke können auf überraschende Weise auseinandergenommen und neu kombiniert werden.</p>
          <p><strong>Auszeichnungen:</strong> Gewinner des Erasmus Jazz Prijs 2023, Mittelyoung – Mittelfest 2023 und CS Carinthischer Sommer Under 30.</p>
          <p><strong>Album – Dump and Die:</strong> Das erste Album des Lavish Trios ist eine Repräsentation der Millennials, die im Ausklang der analogen Ära geboren wurden und in der digitalen Revolution herangewachsen sind. In einem kammermusikalischen Setting kombiniert es rohe, texturierte Streicherklänge – mit der Rauheit des Analogen und der Direktheit des Akustischen. Komposition and Improvisation verweben sich zu dystopischen Visionen, künstlichen Wiegenliedern und einer Nostalgie für vergangene Technologie.</p>
          <p><strong>Links:</strong>
            <a href="https://unitrecords.com/artists/lavish-trio/" target="_blank" rel="noopener">Unit Records — Artist</a> ·
            <a href="https://www.instagram.com/lavish_trio/" target="_blank" rel="noopener">Instagram</a> ·
            <a href="https://open.spotify.com/intl-it/album/6tC4jCG4yMGOEeOhIDj9Gu" target="_blank" rel="noopener">Spotify (Album)</a>
          </p>
          <div class="media-grid">
            <img class="span-3" src="assets/lavish-cover-1200.jpg" alt="Lavish Trio — Dump and Die cover" loading="lazy" decoding="async" width="1200" height="1200">
            <img src="assets/lavish-portrait.jpg" alt="Lavish Trio portrait" loading="lazy" decoding="async" width="950" height="950">
          </div>
        </article>

        <!-- Le altre opere continuano... -->

      </section>
    </main>

    <footer>
      <p>© <span id="y"></span> Maria Isolina Cozzani</p>
    </footer>
  </div>

  <script>
  'use strict';

  // Set current year in footer
  document.getElementById('y').textContent = new Date().getFullYear();

  const worksSection = document.querySelector('#works-data');
  const detail = document.querySelector('#work-detail');
  const thumbsWrap = document.getElementById('thumbs');

  // Poster image overrides for specific works - AGGIUNTO PROBE THE ORACLE
  const POSTER_OVERRIDES = {
    'probe-the-oracle': 'assets/probe-the-oracle-cover.jpg',
    'violin-algorithm-duet': 'https://img.youtube.com/vi/dUpo4ffqWa8/hqdefault.jpg',
    'artemide': 'assets/artemide_6.jpg',
    'exoplanet': 'assets/SM4830_cover%204000x4000px.jpg',
    'lavish-trio': 'assets/lavish-cover-1200.jpg',
    'isln': 'assets/isln-cover-1200.jpg',
    'edera': 'assets/edera1.jpeg',
    '1142km': 'assets/1492.png',
    'solo-livingroom': 'assets/livingroom.jpg',
    'steps-to-be-taken': 'assets/steps1.jpg'
  };

  // Violin background animation
  function createViolinBackground() {
    const violinBg = document.getElementById('violinBackground');
    const violinCount = 12;
    
    for (let i = 0; i < violinCount; i++) {
      const violin = document.createElement('div');
      violin.className = 'floating-violin';
      violin.innerHTML = '🎻';
      
      // Random starting position
      const startX = Math.random() * 100;
      const startY = Math.random() * 100;
      
      // Random animation duration and delay
      const duration = 20 + Math.random() * 40;
      const delay = Math.random() * 20;
      
      violin.style.left = `${startX}%`;
      violin.style.top = `${startY}%`;
      violin.style.animationDuration = `${duration}s`;
      violin.style.animationDelay = `${delay}s`;
      violin.style.fontSize = `${16 + Math.random() * 24}px`;
      violin.style.opacity = `${0.05 + Math.random() * 0.1}`;
      
      violinBg.appendChild(violin);
    }
  }

  // Get YouTube thumbnail URL
  function getYouTubeThumb(id) {
    return `https://img.youtube.com/vi/${id}/hqdefault.jpg`;
  }

  // Build thumbnail element for gallery
  function buildThumb(article) {
    const id = article.id;
    const title = article.dataset.title || id;
    let thumbURL = '';

    // 1) Prefer the article's own poster
    if (article.dataset.poster) {
      thumbURL = article.dataset.poster;
    }

    // 2) If still empty, use an override
    if (!thumbURL && POSTER_OVERRIDES[id]) {
      thumbURL = POSTER_OVERRIDES[id];
    }

    // 3) Fallback to YouTube thumbnail if available
    if (!thumbURL && (article.dataset.yt || article.dataset.ytList)) {
      const firstId = (article.dataset.yt || article.dataset.ytList.split(',')[0].trim());
      thumbURL = getYouTubeThumb(firstId);
    }

    const a = document.createElement('a');
    a.href = `#work/${id}`;
    a.className = 'thumb';
    a.setAttribute('aria-label', title);

    if (thumbURL) {
      const img = document.createElement('img');
      img.className = 'poster';
      img.loading = 'lazy';
      img.decoding = 'async';
      img.alt = title;
      img.src = thumbURL;
      a.appendChild(img);
    } else {
      // Create placeholder if no image available
      const ph = document.createElement('div');
      ph.className = 'poster';
      ph.style.background = 'linear-gradient(135deg, rgba(0,0,0,0.06), rgba(0,0,0,0.02))';
      a.appendChild(ph);
    }

    return a;
  }

  // Build the gallery from works data - ORDINE AGGIORNATO
  function buildGallery() {
    if (!thumbsWrap || !worksSection) return;
    
    thumbsWrap.innerHTML = '';
    
    // ORDINE AGGIORNATO - PROBE THE ORACLE PRIMO
    const desiredOrder = [
      'probe-the-oracle', 'violin-algorithm-duet', 'what-is-left', 'exoplanet', 'lavish-trio', 
      'isln', 'artemide', 'solo-livingroom', 'edera', '1142km', 'locked-outputs',
      'studio-sul-plasma', 'steps-to-be-taken'
    ];
    
    const orderMap = new Map(desiredOrder.map((id, i) => [id, i]));
    const articles = Array.from(worksSection.querySelectorAll('article'))
      .sort((a, b) => (orderMap.get(a.id) || 99) - (orderMap.get(b.id) || 99));
    
    articles.forEach(a => {
      const thumb = buildThumb(a);
      if (thumb) thumbsWrap.appendChild(thumb);
    });
  }

  // Create embed iframe for videos
  function createEmbedIframe(kind, id, title) {
    const div = document.createElement('div');
    div.className = 'embed';
    let url = '';
    
    if (kind === 'yt') {
      url = `https://www.youtube-nocookie.com/embed/${id}`;
      div.innerHTML = `<iframe loading="lazy" src="${url}" title="${title}" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`;
    } else if (kind === 'vimeo') {
      url = `https://player.vimeo.com/video/${id}?dnt=1&byline=0&portrait=0`;
      div.innerHTML = `<iframe loading="lazy" src="${url}" title="${title}" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>`;
    } else if (kind === 'drive') {
      url = `https://drive.google.com/file/d/${id}/preview`;
      div.innerHTML = `<iframe loading="lazy" src="${url}" title="${title}"></iframe>`;
    }
    
    return div;
  }

  // Create media block for work detail view
  function createMediaBlock(article) {
    const ds = article.dataset;
    const title = ds.title || article.id;
    const entries = [];
    
    // Collect all media entries
    if (ds.ytList) {
      ds.ytList.split(',').map(s => s.trim()).filter(Boolean)
        .forEach(id => entries.push(['yt', id]));
    }
    if (ds.vimeoList) {
      ds.vimeoList.split(',').map(s => s.trim()).filter(Boolean)
        .forEach(id => entries.push(['vimeo', id]));
    }
    if (ds.driveList) {
      ds.driveList.split(',').map(s => s.trim()).filter(Boolean)
        .forEach(id => entries.push(['drive', id]));
    }
    if (ds.yt) entries.push(['yt', ds.yt]);
    if (ds.vimeo) entries.push(['vimeo', ds.vimeo]);
    if (ds.drive) entries.push(['drive', ds.drive]);
    
    if (entries.length === 0) return null;

    // Multiple media entries
    const container = document.createElement('div');
    if (entries.length > 1) container.className = 'video-grid';
    
    entries.forEach(([kind, id]) => {
      container.appendChild(createEmbedIframe(kind, id, title));
    });
    
    return container;
  }

  // Set active nav state
  function setActiveNav(section) {
    document.querySelectorAll('nav a[href^="#"]').forEach(a => {
      a.removeAttribute('aria-current');
      if (a.getAttribute('href') === `#${section}`) a.setAttribute('aria-current', 'page');
    });
  }

  // Show top-level section (works, bio, contact)
  function showTop(section) {
    ['works', 'bio', 'contact'].forEach(id => {
      const el = document.getElementById(id);
      if (el) el.hidden = (id !== section);
    });
    
    document.body.classList.remove('is-detail');
    const detailEl = document.getElementById('work-detail');
    
    if (detailEl) {
      detailEl.hidden = true;
      detailEl.innerHTML = '';
    }
    
    setActiveNav(section);
    
    // Scroll to top when switching sections
    if (section === 'works') {
      window.scrollTo(0, 0);
    }
  }

  // Show work detail view
  function showWork(slug) {
    const article = document.getElementById(slug);
    if (!article) {
      showTop('works');
      return;
    }
    
    document.body.classList.add('is-detail');
    const detailEl = document.getElementById('work-detail');
    detailEl.hidden = false;
    detailEl.innerHTML = `<a href="#works" class="back">← all works</a>`;

    const media = createMediaBlock(article);
    if (media) detailEl.appendChild(media);
    
    const clone = article.cloneNode(true);
    clone.removeAttribute('id');
    detailEl.appendChild(clone);
    
    window.scrollTo(0, 0);
  }

  // Handle URL routing
  function handleRoute() {
    const h = decodeURIComponent(window.location.hash || '#works');
    const m = h.match(/^#work\/(.+)$/);
    
    if (m) {
      showWork(m[1]);
      return;
    }
    
    const sec = h.replace('#', '');
    if (['bio', 'contact', 'works'].includes(sec)) {
      showTop(sec);
    } else {
      showTop('works');
    }
  }

  // Initialize instant navigation
  function initNavInstant() {
    document.querySelectorAll('nav a[href^="#"]').forEach(a => {
      a.addEventListener('click', (e) => {
        const target = a.getAttribute('href').slice(1);
        if (['bio', 'contact', 'works'].includes(target)) {
          e.preventDefault();
          window.history.replaceState(null, '', `#${target}`);
          showTop(target);
        }
      });
    });
  }

  // Ensure security rel on external links
  function hardenExternalLinks() {
    document.querySelectorAll('a[target="_blank"]').forEach(a => {
      const rel = (a.getAttribute('rel') || '').split(/\s+/).filter(Boolean);
      if (!rel.includes('noopener')) rel.push('noopener');
      if (!rel.includes('noreferrer')) rel.push('noreferrer');
      a.setAttribute('rel', rel.join(' '));
    });
  }

  // Initialize everything when DOM is ready
  document.addEventListener('DOMContentLoaded', () => {
    createViolinBackground();
    buildGallery();
    handleRoute();
    initNavInstant();
    hardenExternalLinks();
  });

  // Handle hash changes
  window.addEventListener('hashchange', handleRoute);
  </script>
</body>
</html>
